{"ast":null,"code":"import _objectSpread from\"D:/Invoice System/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{Building2,Eye,EyeOff,CheckCircle,AlertCircle}from'lucide-react';import logger from'../utils/logger';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[showPassword,setShowPassword]=useState(false);const[successMessage,setSuccessMessage]=useState('');const[fieldErrors,setFieldErrors]=useState({});const{login,loading,error,clearError}=useAuth();const navigate=useNavigate();useEffect(()=>{// Clear success message when component unmounts\nreturn()=>{setSuccessMessage('');clearError();};},[clearError]);const validateForm=()=>{const errors={};if(!email.trim()){errors.email='Email is required';}else if(!email.includes('@')||!email.includes('.')){errors.email='Please enter a valid email address';}if(!password.trim()){errors.password='Password is required';}else if(password.length<6){errors.password='Password must be at least 6 characters';}setFieldErrors(errors);return Object.keys(errors).length===0;};const handleSubmit=async e=>{e.preventDefault();// Clear previous messages\nsetSuccessMessage('');clearError();// Validate form\nif(!validateForm()){return;}logger.logUserAction('LOGIN_ATTEMPT','LoginForm',{email});const result=await login(email,password);if(result.success){var _result$user;setSuccessMessage('Login successful! Redirecting to dashboard...');logger.logUserAction('LOGIN_SUCCESS','LoginForm',{email,userId:(_result$user=result.user)===null||_result$user===void 0?void 0:_result$user.id});// Redirect after a short delay to show success message\nsetTimeout(()=>{navigate('/dashboard');},1000);}else{logger.logUserAction('LOGIN_FAILED','LoginForm',{email,error:result.error});}};const handleInputChange=(field,value)=>{// Clear field-specific error when user starts typing\nif(fieldErrors[field]){setFieldErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:''}));}// Clear global error when user makes any change\nif(error){clearError();}// Clear success message when user makes any change\nif(successMessage){setSuccessMessage('');}// Update field value\nif(field==='email'){setEmail(value);}else if(field==='password'){setPassword(value);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(Building2,{className:\"h-12 w-12 text-aasko-blue\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900\",children:\"Sign in to your account\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-center text-sm text-gray-600\",children:\"Aasko Construction Invoice Management System\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8 space-y-6\",onSubmit:handleSubmit,noValidate:true,children:[successMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md flex items-center\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 mr-2 flex-shrink-0\"}),successMessage]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-5 w-5 mr-2 flex-shrink-0\"}),error]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",type:\"email\",autoComplete:\"email\",required:true,value:email,onChange:e=>handleInputChange('email',e.target.value),className:\"mt-1 input-field \".concat(fieldErrors.email?'border-red-300 focus:ring-red-500 focus:border-red-500':''),placeholder:\"admin@aasko.com\",\"aria-invalid\":fieldErrors.email?'true':'false',\"aria-describedby\":fieldErrors.email?'email-error':undefined}),fieldErrors.email&&/*#__PURE__*/_jsxs(\"p\",{id:\"email-error\",className:\"mt-2 text-sm text-red-600 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4 mr-1 flex-shrink-0\"}),fieldErrors.email]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 relative\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:showPassword?'text':'password',autoComplete:\"current-password\",required:true,value:password,onChange:e=>handleInputChange('password',e.target.value),className:\"input-field pr-10 \".concat(fieldErrors.password?'border-red-300 focus:ring-red-500 focus:border-red-500':''),placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",\"aria-invalid\":fieldErrors.password?'true':'false',\"aria-describedby\":fieldErrors.password?'password-error':undefined}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"absolute inset-y-0 right-0 pr-3 flex items-center\",onClick:()=>setShowPassword(!showPassword),\"aria-label\":showPassword?'Hide password':'Show password',children:showPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"h-5 w-5 text-gray-400\"}):/*#__PURE__*/_jsx(Eye,{className:\"h-5 w-5 text-gray-400\"})})]}),fieldErrors.password&&/*#__PURE__*/_jsxs(\"p\",{id:\"password-error\",className:\"mt-2 text-sm text-red-600 flex items-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4 mr-1 flex-shrink-0\"}),fieldErrors.password]})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full btn btn-primary flex items-center justify-center\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"}),\"Signing in...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 mr-2\"}),\"Sign in\"]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-sm text-gray-600 bg-gray-50 p-4 rounded-md border border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-700 mb-2\",children:\"Demo credentials:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Email:\"}),\" admin@aasko.com\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Password:\"}),\" admin123\"]})]})]})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}