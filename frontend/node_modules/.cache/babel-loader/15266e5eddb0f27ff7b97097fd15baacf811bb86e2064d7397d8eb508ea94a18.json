{"ast":null,"code":"import _objectSpread from\"D:/Invoice System/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Frontend logging utility for Aasko Construction Invoice System\nclass Logger{constructor(){this.isDevelopment=process.env.NODE_ENV==='development';this.logLevel=this.isDevelopment?'debug':'info';this.logs=[];this.maxLogs=1000;// Keep last 1000 logs in memory\n}// Core logging method\nlog(level,message){let data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const logEntry={timestamp:new Date().toISOString(),level:level.toUpperCase(),message,data,url:window.location.href,userAgent:navigator.userAgent,userId:this.getCurrentUserId(),sessionId:this.getSessionId()};// Add to memory logs\nthis.logs.push(logEntry);if(this.logs.length>this.maxLogs){this.logs.shift();}// Console output in development\nif(this.isDevelopment){const consoleMethod=level==='error'?'error':level==='warn'?'warn':level==='debug'?'debug':'log';console[consoleMethod](\"[\".concat(level.toUpperCase(),\"] \").concat(message),data);}// Send to backend in production (optional)\nif(!this.isDevelopment&&level!=='debug'){this.sendToBackend(logEntry);}}debug(message,data){this.log('debug',message,data);}info(message,data){this.log('info',message,data);}warn(message,data){this.log('warn',message,data);}error(message,data){this.log('error',message,data);}// API call logging\nlogApiCall(method,url,status,responseTime){let error=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;const logData={type:'api_call',method,url,status,responseTime:\"\".concat(responseTime,\"ms\"),error:error?error.message:null};if(error){this.error(\"API Error: \".concat(method,\" \").concat(url),logData);}else{this.info(\"API Success: \".concat(method,\" \").concat(url),logData);}}// User action logging\nlogUserAction(action,component){let data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.info(\"User Action: \".concat(action),_objectSpread({type:'user_action',action,component},data));}// Page navigation logging\nlogPageNavigation(from,to){this.info(\"Navigation: \".concat(from,\" -> \").concat(to),{type:'navigation',from,to});}// Form submission logging\nlogFormSubmission(formType,success){let data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const message=\"Form \".concat(success?'Success':'Failed',\": \").concat(formType);const logData=_objectSpread({type:'form_submission',formType,success},data);if(success){this.info(message,logData);}else{this.error(message,logData);}}// Authentication logging\nlogAuthEvent(event,success){let userEmail=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let error=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;const message=\"Auth: \".concat(event,\" - \").concat(success?'Success':'Failed');const logData={type:'auth_event',event,success,userEmail,error:error?error.message:null};if(success){this.info(message,logData);}else{this.error(message,logData);}}// Performance logging\nlogPerformance(metric,value){let data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.info(\"Performance: \".concat(metric),_objectSpread({type:'performance',metric,value},data));}// Error boundary logging\nlogError(error){let errorInfo=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.error('React Error Boundary',_objectSpread({type:'react_error',error:error.toString(),stack:error.stack},errorInfo));}// Get current user ID from localStorage or context\ngetCurrentUserId(){try{const user=JSON.parse(localStorage.getItem('user')||'{}');return user.id||null;}catch(_unused){return null;}}// Get session ID\ngetSessionId(){let sessionId=sessionStorage.getItem('sessionId');if(!sessionId){sessionId=\"session_\".concat(Date.now(),\"_\").concat(Math.random().toString(36).substr(2,9));sessionStorage.setItem('sessionId',sessionId);}return sessionId;}// Send logs to backend (for production monitoring)\nasync sendToBackend(logEntry){try{// Only send error and warning logs to backend\nif(logEntry.level==='ERROR'||logEntry.level==='WARN'){await fetch('/api/v1/logs',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(logEntry)});}}catch(e){// Silently fail to avoid infinite loops\nconsole.warn('Failed to send log to backend:',e);}}// Get logs for debugging\ngetLogs(){let level=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;let filteredLogs=this.logs;if(level){filteredLogs=this.logs.filter(log=>log.level===level.toUpperCase());}return filteredLogs.slice(-limit);}// Export logs for debugging\nexportLogs(){const logsStr=JSON.stringify(this.logs,null,2);const blob=new Blob([logsStr],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"aasko-logs-\".concat(new Date().toISOString().split('T')[0],\".json\");document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);}// Clear logs\nclearLogs(){this.logs=[];this.info('Logs cleared');}}// Create singleton instance\nconst logger=new Logger();// React Hook for logging\nexport const useLogger=()=>{return logger;};// API interceptor for automatic logging\nexport const createApiLogger=axiosInstance=>{axiosInstance.interceptors.request.use(config=>{var _config$method;config.metadata={startTime:new Date()};logger.debug(\"API Request: \".concat((_config$method=config.method)===null||_config$method===void 0?void 0:_config$method.toUpperCase(),\" \").concat(config.url),{headers:config.headers,data:config.data});return config;},error=>{logger.error('API Request Error',{error:error.message});return Promise.reject(error);});axiosInstance.interceptors.response.use(response=>{var _response$config$meth;const endTime=new Date();const startTime=response.config.metadata.startTime;const responseTime=endTime-startTime;logger.logApiCall((_response$config$meth=response.config.method)===null||_response$config$meth===void 0?void 0:_response$config$meth.toUpperCase(),response.config.url,response.status,responseTime);return response;},error=>{var _error$config,_error$config$metadat,_error$config2,_error$config2$method,_error$config3,_error$response;const endTime=new Date();const startTime=((_error$config=error.config)===null||_error$config===void 0?void 0:(_error$config$metadat=_error$config.metadata)===null||_error$config$metadat===void 0?void 0:_error$config$metadat.startTime)||new Date();const responseTime=endTime-startTime;logger.logApiCall((_error$config2=error.config)===null||_error$config2===void 0?void 0:(_error$config2$method=_error$config2.method)===null||_error$config2$method===void 0?void 0:_error$config2$method.toUpperCase(),(_error$config3=error.config)===null||_error$config3===void 0?void 0:_error$config3.url,((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)||0,responseTime,error);return Promise.reject(error);});};export default logger;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}