{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{FileText,DollarSign,CheckCircle,Clock,AlertTriangle,TrendingUp,Plus,Download,Upload}from'lucide-react';import{LineChart,Line,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer}from'recharts';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(){const[stats,setStats]=useState({total_invoices:0,total_amount:0,paid_invoices:0,pending_invoices:0,overdue_invoices:0});const[monthlyRevenue,setMonthlyRevenue]=useState([]);const[recentInvoices,setRecentInvoices]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchDashboardData();},[]);const fetchDashboardData=async()=>{try{const[statsRes,revenueRes,invoicesRes]=await Promise.all([axios.get('/api/v1/dashboard/stats'),axios.get('/api/v1/dashboard/monthly-revenue'),axios.get('/api/v1/invoices?limit=5')]);setStats(statsRes.data);setMonthlyRevenue(revenueRes.data);setRecentInvoices(invoicesRes.data);}catch(error){console.error('Failed to fetch dashboard data:',error);}finally{setLoading(false);}};const formatCurrency=amount=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(amount);};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString();};const getStatusColor=status=>{switch(status){case'paid':return'bg-green-100 text-green-800';case'sent':return'bg-blue-100 text-blue-800';case'overdue':return'bg-red-100 text-red-800';case'draft':return'bg-gray-100 text-gray-800';default:return'bg-gray-100 text-gray-800';}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-aasko-blue\"})});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Welcome to Aasko Construction Invoice System\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 bg-aasko-blue p-3 rounded-md\",children:/*#__PURE__*/_jsx(FileText,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Total Invoices\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.total_invoices})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 bg-green-600 p-3 rounded-md\",children:/*#__PURE__*/_jsx(DollarSign,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:formatCurrency(stats.total_amount)})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 bg-green-500 p-3 rounded-md\",children:/*#__PURE__*/_jsx(CheckCircle,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Paid\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.paid_invoices})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 bg-blue-500 p-3 rounded-md\",children:/*#__PURE__*/_jsx(Clock,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.pending_invoices})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 bg-red-500 p-3 rounded-md\",children:/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Overdue\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.overdue_invoices})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 card p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Monthly Revenue\"}),/*#__PURE__*/_jsx(TrendingUp,{className:\"h-5 w-5 text-gray-400\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-64\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(LineChart,{data:monthlyRevenue,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"month\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>formatCurrency(value)}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"revenue\",stroke:\"#1e40af\",strokeWidth:2,dot:{fill:'#1e40af'}})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"a\",{href:\"/invoices/new\",className:\"flex items-center p-3 bg-aasko-blue text-white rounded-md hover:bg-aasko-blue-dark transition-colors\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-5 w-5 mr-3\"}),\"Create Invoice\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>window.open('/api/v1/invoices/export','_blank'),className:\"w-full flex items-center p-3 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors\",children:[/*#__PURE__*/_jsx(Download,{className:\"h-5 w-5 mr-3\"}),\"Export Invoices\"]}),/*#__PURE__*/_jsxs(\"a\",{href:\"/clients/new\",className:\"flex items-center p-3 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-5 w-5 mr-3\"}),\"Add Client\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 card p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Recent Invoices\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/invoices\",className:\"text-aasko-blue hover:text-aasko-blue-dark text-sm font-medium\",children:\"View all\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Invoice #\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Client\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:recentInvoices.map(invoice=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/invoices/\".concat(invoice.id),className:\"text-aasko-blue hover:text-aasko-blue-dark\",children:invoice.invoice_number})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:invoice.client.name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:formatDate(invoice.invoice_date)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:formatCurrency(invoice.total_amount)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(getStatusColor(invoice.status)),children:invoice.status})})]},invoice.id))})]})})]})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}