{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import{ArrowLeft,Edit,Download,Printer,Mail,FileText}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function InvoiceView(){const{id}=useParams();const navigate=useNavigate();const[invoice,setInvoice]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{fetchInvoice();},[id]);const fetchInvoice=async()=>{try{const response=await axios.get(\"/api/v1/invoices/\".concat(id));setInvoice(response.data);}catch(error){console.error('Failed to fetch invoice:',error);}finally{setLoading(false);}};const formatCurrency=amount=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(amount);};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString();};const getStatusColor=status=>{switch(status){case'paid':return'bg-green-100 text-green-800';case'sent':return'bg-blue-100 text-blue-800';case'overdue':return'bg-red-100 text-red-800';case'draft':return'bg-gray-100 text-gray-800';default:return'bg-gray-100 text-gray-800';}};const generatePDF=()=>{// This would generate a PDF version of the invoice\n// For now, we'll use the browser's print functionality\nwindow.print();};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-aasko-blue\"})});}if(!invoice){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Invoice not found\"})});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8 print:hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/invoices'),className:\"mr-4 text-gray-600 hover:text-gray-900\",children:/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:[\"Invoice \",invoice.invoice_number]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"View and manage invoice details\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(\"/invoices/\".concat(id,\"/edit\")),className:\"btn btn-secondary flex items-center\",children:[/*#__PURE__*/_jsx(Edit,{className:\"h-4 w-4 mr-2\"}),\"Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:generatePDF,className:\"btn btn-secondary flex items-center\",children:[/*#__PURE__*/_jsx(Printer,{className:\"h-4 w-4 mr-2\"}),\"Print\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary flex items-center\",children:[/*#__PURE__*/_jsx(Mail,{className:\"h-4 w-4 mr-2\"}),\"Send\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white\",id:\"invoice-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b-2 border-aasko-blue pb-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-aasko-blue mb-2\",children:\"Aasko Construction\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"123 Construction Ave, Building City\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"+1-555-0123 | info@aasko.com\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"www.aasko.com\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inline-flex px-3 py-1 text-sm font-semibold rounded-full \".concat(getStatusColor(invoice.status)),children:invoice.status.toUpperCase()})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-8 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-2\",children:\"Bill To:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-700\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:invoice.client.name}),invoice.client.address&&/*#__PURE__*/_jsx(\"p\",{children:invoice.client.address}),invoice.client.phone&&/*#__PURE__*/_jsx(\"p\",{children:invoice.client.phone}),invoice.client.email&&/*#__PURE__*/_jsx(\"p\",{children:invoice.client.email}),invoice.client.ntn&&/*#__PURE__*/_jsxs(\"p\",{children:[\"NTN: \",invoice.client.ntn]}),invoice.client.gst&&/*#__PURE__*/_jsxs(\"p\",{children:[\"GST: \",invoice.client.gst]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Invoice Number:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 font-medium\",children:invoice.invoice_number})]}),invoice.po_number&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"PO Number:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 font-medium\",children:invoice.po_number})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Invoice Date:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 font-medium\",children:formatDate(invoice.invoice_date)})]}),invoice.due_date&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Due Date:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 font-medium\",children:formatDate(invoice.due_date)})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-50\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 px-4 py-2 text-left text-sm font-medium text-gray-700\",children:\"S/N\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 px-4 py-2 text-left text-sm font-medium text-gray-700\",children:\"Item Description\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 px-4 py-2 text-center text-sm font-medium text-gray-700\",children:\"Unit\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 px-4 py-2 text-center text-sm font-medium text-gray-700\",children:\"Qty\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 px-4 py-2 text-right text-sm font-medium text-gray-700\",children:\"Rate\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border border-gray-300 px-4 py-2 text-right text-sm font-medium text-gray-700\",children:\"Total\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:invoice.items.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 px-4 py-2 text-sm\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 px-4 py-2 text-sm\",children:item.description}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 px-4 py-2 text-sm text-center\",children:item.unit}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 px-4 py-2 text-sm text-center\",children:item.quantity}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 px-4 py-2 text-sm text-right\",children:formatCurrency(item.unit_price)}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 px-4 py-2 text-sm text-right\",children:formatCurrency(item.total_price)})]},item.id))}),/*#__PURE__*/_jsxs(\"tfoot\",{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-50 font-semibold\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"border border-gray-300 px-4 py-2 text-right text-sm\",children:\"Subtotal:\"}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 px-4 py-2 text-right text-sm\",children:formatCurrency(invoice.subtotal)})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-50 font-semibold\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"border border-gray-300 px-4 py-2 text-right text-sm\",children:\"Tax:\"}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 px-4 py-2 text-right text-sm\",children:formatCurrency(invoice.tax_amount)})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100 font-bold\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"border border-gray-300 px-4 py-2 text-right text-sm\",children:\"Total:\"}),/*#__PURE__*/_jsx(\"td\",{className:\"border border-gray-300 px-4 py-2 text-right text-sm\",children:formatCurrency(invoice.total_amount)})]})]})]})}),invoice.amount_in_words&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Amount in Words:\"}),\" \",invoice.amount_in_words]})}),invoice.notes&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-2\",children:\"Notes:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700\",children:invoice.notes})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-12 pt-8 border-t border-gray-300\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b-2 border-gray-400 w-48 mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Authorized Signature\"})]})})})]})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}